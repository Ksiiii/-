# 数据库设计文档: aigc_social_db

## 数据表: batch_task

### 1. 表结构设计
| 字段名 | 类型 | 是否为空 | 默认值 | 备注/描述 |
| :--- | :--- | :--- | :--- | :--- |
| task_id | int | NO | NULL |  |
| user_id | int | NO | NULL |  |
| task_name | varchar(100) | NO | NULL |  |
| total_count | int | YES | 0 |  |
| processed_count | int | YES | 0 |  |
| status | enum('pending','running','completed','failed') | YES | pending |  |
| created_at | datetime | YES | CURRENT_TIMESTAMP |  |

### 2. 样本数据预览 (前5条)
| task_id | user_id | task_name | total_count | processed_count | status | created_at |
| --- | --- | --- | --- | --- | --- | --- |
| 1 | 1 | Task_1769615144 | 3 | 3 | completed | 2026-01-28 23:45:44 |
| 2 | 1 | Task_1769615235 | 3 | 3 | completed | 2026-01-28 23:47:15 |
| 3 | 1 | Task_1769649654 | 3 | 3 | completed | 2026-01-29 09:20:54 |

---

## 数据表: content_sample

### 1. 表结构设计
| 字段名 | 类型 | 是否为空 | 默认值 | 备注/描述 |
| :--- | :--- | :--- | :--- | :--- |
| sample_id | int | NO | NULL |  |
| user_id | int | NO | NULL |  |
| task_id | int | YES | NULL |  |
| file_type | enum('text','image','video','audio') | NO | NULL |  |
| content_source | longtext | YES | NULL | 文件路径或文本内容 |
| source_platform | varchar(50) | YES | NULL |  |
| original_url | varchar(500) | YES | NULL |  |
| tags | varchar(255) | YES |  |  |
| remark | varchar(255) | YES |  |  |
| is_favorite | tinyint(1) | YES | 0 |  |
| upload_time | datetime | YES | CURRENT_TIMESTAMP |  |
| process_status | enum('waiting','processed','archived') | YES | waiting |  |

### 2. 样本数据预览 (前5条)
| sample_id | user_id | task_id | file_type | content_source | source_platform | original_url | tags | remark | is_favorite | upload_time | process_status |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| 1 | 1 | None | image | ./uploads/1769609765... | Weibo | None |  |  | 0 | 2026-01-28 22:16:05 | processed |
| 2 | 1 | 2 | text | 这是一段测试文本 | Weibo | None |  |  | 0 | 2026-01-28 22:55:57 | processed |
| 3 | 1 | None | text | 清晨的城市在薄雾中苏醒，街道被微光轻轻点... | Weibo | None |  |  | 0 | 2026-01-28 22:57:55 | processed |
| 4 | 1 | None | text | 中等偏难，但是工作量巨大，对比之前的cs... | Weibo | None |  |  | 0 | 2026-01-28 23:01:12 | processed |
| 5 | 1 | None | text | 中等偏难，但是工作量巨大，对比之前的cs... | Weibo | None |  |  | 0 | 2026-01-28 23:03:16 | processed |

---

## 数据表: recognition_result

### 1. 表结构设计
| 字段名 | 类型 | 是否为空 | 默认值 | 备注/描述 |
| :--- | :--- | :--- | :--- | :--- |
| result_id | int | NO | NULL |  |
| sample_id | int | NO | NULL |  |
| is_aigc | tinyint(1) | NO | NULL |  |
| confidence | decimal(5,4) | YES | NULL |  |
| details | json | YES | NULL |  |
| algorithm_name | varchar(50) | YES | General-AIGC-Detector |  |
| detect_time | datetime | YES | CURRENT_TIMESTAMP |  |

### 2. 样本数据预览 (前5条)
| result_id | sample_id | is_aigc | confidence | details | algorithm_name | detect_time |
| --- | --- | --- | --- | --- | --- | --- |
| 1 | 1 | 0 | 0.0300 | {"msg": "Score > 0.5... | Sightengine-GenAI | 2026-01-28 22:16:10 |
| 3 | 3 | 1 | 0.9500 | {"note": "流畅的叙述，常用词汇... | GLM-4-Prompt | 2026-01-28 22:57:58 |
| 4 | 4 | 1 | 0.9000 | {"note": "逻辑结构清晰，专业术... | GLM-4-Prompt | 2026-01-28 23:01:14 |
| 5 | 5 | 0 | 0.8000 | {"note": "存在口语化表达和逻辑... | GLM-4-Prompt | 2026-01-28 23:03:18 |
| 6 | 7 | 0 | 0.9000 | {"note": "包含大量口语化表达（... | GLM-4-Prompt | 2026-01-28 23:05:40 |

---

## 数据表: sys_user

### 1. 表结构设计
| 字段名 | 类型 | 是否为空 | 默认值 | 备注/描述 |
| :--- | :--- | :--- | :--- | :--- |
| user_id | int | NO | NULL |  |
| username | varchar(50) | NO | NULL |  |
| password | varchar(100) | NO | NULL |  |
| role | enum('user','admin') | YES | user |  |
| created_at | datetime | YES | CURRENT_TIMESTAMP |  |

### 2. 样本数据预览 (前5条)
| user_id | username | password | role | created_at |
| --- | --- | --- | --- | --- |
| 1 | admin | 123456 | admin | 2026-01-28 22:13:31 |

---

